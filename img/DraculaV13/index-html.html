<!DOCTYPE html>
<html lang="fr">
<head>



<!-- Styles améliorés pour les écrans titre et Transylvanie (à ajouter dans la section style) -->
<style>

  #audio-init-button {
    display: none !important;
  }

  /* Styles améliorés pour l'écran titre et la page Transylvanie */
  
  /* Animation de sang qui goutte */
  @keyframes bloodDrip {
    0% { transform: scaleY(0); opacity: 0; }
    30% { opacity: 1; }
    100% { transform: scaleY(1); opacity: 0.8; }
  }
  
  /* Animation de battement pour le titre */
  @keyframes heartbeat {
    0% { transform: scale(1); }
    5% { transform: scale(1.05); }
    10% { transform: scale(1); }
    15% { transform: scale(1.05); }
    20% { transform: scale(1); }
    100% { transform: scale(1); }
  }
  
  /* Animation pour le brouillard */
  @keyframes fogMove {
    0% { transform: translateX(-5%) translateY(0); opacity: 0.3; }
    50% { transform: translateX(5%) translateY(-5%); opacity: 0.4; }
    100% { transform: translateX(-5%) translateY(0); opacity: 0.3; }
  }
  
  /* Animation pour l'apparition des textes */
  @keyframes textReveal {
    0% { opacity: 0; transform: translateY(20px); }
    100% { opacity: 1; transform: translateY(0); }
  }
  
  /* Animation pour le bouton pulsant */
  @keyframes buttonPulse {
    0% { box-shadow: 0 0 10px rgba(128, 0, 0, 0.5); }
    50% { box-shadow: 0 0 20px rgba(192, 0, 0, 0.7); }
    100% { box-shadow: 0 0 10px rgba(128, 0, 0, 0.5); }
  }

  #passage-1 {
    position: relative;
    max-width: 1000px;
    margin: 0 auto;
    padding: 40px 20px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }
  
  /* Effet de vignette pour assombrir les bords */
  #passage-1::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(ellipse at center, rgba(0,0,0,0) 40%, rgba(0,0,0,0.7) 100%);
    pointer-events: none;
    z-index: -1;
  }

  /* Titre principal amélioré */
  #passage-1 .title {
    font-size: 5em;
    text-align: center;
    color: #b00;
    text-shadow: 
      0 0 10px rgba(0,0,0,0.8),
      0 0 30px rgba(120,0,0,0.6),
      0 0 50px rgba(128,0,0,0.4);
    letter-spacing: 3px;
    font-variant: small-caps;
    font-family: 'Trajan Pro', 'Times New Roman', serif;
    margin-bottom: 20px;
    position: relative;
    animation: heartbeat 5s infinite;
  }
  
  /* Effet de sang qui goutte depuis le titre */
  #passage-1 .title::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 30px;
    bottom: -30px;
    left: 0;
    background: linear-gradient(180deg, #b00, transparent);
    transform-origin: top;
    animation: bloodDrip 5s ease-in-out infinite;
  }
  
  #passage-1 .author {
    font-size: 1.4em;
    text-align: center;
    font-style: italic;
    margin: 30px 0;
    color: #aaa;
    opacity: 0.8;
    animation: textReveal 2s ease-out forwards;
    animation-delay: 0.5s;
    opacity: 0;
  }
  
  /* Bouton amélioré pour l'écran titre */
  #passage-1 .start-button {
    width: 300px;
    margin: 60px auto 0;
    padding: 18px 30px;
    background: linear-gradient(to bottom, #900, #500);
    color: #fff;
    text-align: center;
    text-decoration: none;
    border-radius: 5px;
    font-size: 1.4em;
    cursor: pointer;
    border: 1px solid #700;
    position: relative;
    overflow: hidden;
    animation: buttonPulse 3s infinite;
    transition: all 0.5s ease;
    font-family: 'Trajan Pro', 'Times New Roman', serif;
    letter-spacing: 1px;
    text-transform: uppercase;
  }
  
  #passage-1 .start-button:hover {
    background: linear-gradient(to bottom, #a00, #600);
    transform: translateY(-5px) scale(1.05);
    box-shadow: 
      0 10px 30px rgba(0,0,0,0.5),
      0 0 30px rgba(128,0,0,0.5);
  }
  
  /* Effet brillant sur le bouton au survol */
  #passage-1 .start-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      to right,
      transparent 0%,
      rgba(255,255,255,0.2) 50%,
      transparent 100%
    );
    transition: left 0.7s ease;
  }
  
  #passage-1 .start-button:hover::before {
    left: 100%;
  }
  
  /* Écran de Transylvanie amélioré */
  #passage-2 {
    max-width: 1000px;
    margin: 0 auto;
    padding: 30px;
    position: relative;
    z-index: 10;
  }
  
  /* Effet de brouillard animé pour Transylvanie */
  .fog-effect {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
      url('https://raw.githubusercontent.com/brizoss/chateau-dracula-assets/main/img/fog.png');
    background-size: cover;
    opacity: 0.3;
    pointer-events: none;
    z-index: -1;
    animation: fogMove 60s ease-in-out infinite;
  }
  
  #passage-2 .title {
    font-size: 3.5em;
    text-align: center;
    color: #a00;
    text-shadow: 
      0 0 10px rgba(0,0,0,0.8),
      0 0 20px rgba(120,0,0,0.6);
    letter-spacing: 3px;
    font-variant: small-caps;
    margin-bottom: 30px;
    font-family: 'Trajan Pro', 'Times New Roman', serif;
    padding-bottom: 15px;
    position: relative;
  }
  
  /* Ligne décorative sous le titre de Transylvanie */
  #passage-2 .title::after {
    content: '';
    position: absolute;
    width: 60%;
    height: 1px;
    bottom: 0;
    left: 20%;
    background: linear-gradient(to right, transparent, #a00, transparent);
  }
  
  /* Conteneur pour les paragraphes avec effet de parchemin */
  .parchment-container {
    background-color: rgba(0, 0, 0, 0.6);
    border: 1px solid #500;
    box-shadow: 
      0 0 20px rgba(0,0,0,0.5),
      inset 0 0 15px rgba(128,0,0,0.2);
    border-radius: 5px;
    padding: 30px;
    margin: 20px 0;
    position: relative;
    overflow: hidden;
  }
  
  /* Style amélioré pour les paragraphes */
  #passage-2 p {
    font-size: 1.1em;
    line-height: 1.7;
    margin-bottom: 20px;
    text-align: justify;
    color: #ddd;
    font-family: 'Georgia', serif;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
    position: relative;
    animation: textReveal 1s ease-out forwards;
    opacity: 0;
  }
  
  /* Animation séquentielle pour les paragraphes */
  #passage-2 p:nth-child(1) { animation-delay: 0.3s; }
  #passage-2 p:nth-child(2) { animation-delay: 0.6s; }
  #passage-2 p:nth-child(3) { animation-delay: 0.9s; }
  #passage-2 p:nth-child(4) { animation-delay: 1.2s; }
  #passage-2 p:nth-child(5) { animation-delay: 1.5s; }
  #passage-2 p:nth-child(6) { animation-delay: 1.8s; }
  
  /* Première lettre stylisée */
  #passage-2 p:first-of-type::first-letter {
    font-size: 3.5em;
    float: left;
    line-height: 0.8;
    margin-right: 8px;
    color: #a00;
    font-family: 'Times New Roman', serif;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
  }
  
  /* Bouton amélioré pour continuer */
  #passage-2 .continue-button {
    width: 280px;
    margin: 40px auto 20px;
    padding: 16px 25px;
    background: linear-gradient(to bottom, #800, #400);
    color: #fff;
    text-align: center;
    text-decoration: none;
    border-radius: 5px;
    font-size: 1.3em;
    cursor: pointer;
    border: 1px solid #600;
    position: relative;
    overflow: hidden;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    transition: all 0.4s ease;
    animation: buttonPulse 3s infinite;
    animation-delay: 2s;
  }
  
  #passage-2 .continue-button:hover {
    background: linear-gradient(to bottom, #900, #500);
    transform: translateY(-3px);
    box-shadow: 
      0 8px 20px rgba(0,0,0,0.4),
      0 0 20px rgba(128,0,0,0.4);
  }
  
  /* Effet brillant sur le bouton au survol */
  #passage-2 .continue-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      to right,
      transparent 0%,
      rgba(255,255,255,0.2) 50%,
      transparent 100%
    );
    transition: left 0.7s ease;
  }
  
  #passage-2 .continue-button:hover::before {
    left: 100%;
  }
  
  /* Effet de vignette pour assombrir les bords */
  .vignette-effect {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(ellipse at center, rgba(0,0,0,0) 40%, rgba(0,0,0,0.7) 100%);
    pointer-events: none;
    z-index: -1;
  }
  
  /* Barre de narration améliorée */
  .narration-bar {
    text-align: center;
    margin: 0 auto 30px;
    padding: 15px;
    position: relative;
    border-radius: 5px;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  
  /* Bouton de narration amélioré */
  .narration-button {
    background: linear-gradient(to bottom, #700, #400);
    color: #fff;
    border: 1px solid #800;
    border-radius: 5px;
    padding: 12px 20px;
    cursor: pointer;
    font-size: 1.1em;
    display: inline-flex;
    align-items: center;
    box-shadow: 0 5px 15px rgba(0,0,0,0.4);
    transition: all 0.3s ease;
    font-family: 'Georgia', serif;
  }
  
  .narration-button:hover {
    background: linear-gradient(to bottom, #900, #500);
    transform: translateY(-3px);
    box-shadow: 
      0 8px 20px rgba(0,0,0,0.5),
      0 0 15px rgba(255,0,0,0.3);
  }
  
  .narration-button span {
    margin-right: 10px;
  }
  
  /*Ajouter ce style dans la section head de votre HTML */
<style id="back-button">
  #bouton-revenir {
    position: fixed;
    bottom: 20px;
    left: 20px;
    padding: 10px 15px;
    background: linear-gradient(to bottom, #600, #300);
    color: #fff;
    text-align: center;
    text-decoration: none;
    border-radius: 5px;
    font-size: 1.1em;
    cursor: pointer;
    border: 1px solid #800;
    z-index: 9000;
    font-family: 'Georgia', serif;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.7);
    transition: all 0.3s ease;
    /* Assurer que le bouton est visible */
    display: block;
    opacity: 0.9;
  }

  #bouton-revenir:hover {
    background: linear-gradient(to bottom, #800, #500);
    transform: translateY(-3px) scale(1.05);
    box-shadow: 
      0 8px 20px rgba(0,0,0,0.5),
      0 0 20px rgba(128,0,0,0.5);
    opacity: 1;
  }

  #bouton-revenir:active {
    transform: translateY(1px);
    box-shadow: 0 2px 10px rgba(0,0,0,0.4);
  }

  /* Effet brillant sur le bouton au survol */
  #bouton-revenir::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      to right,
      transparent 0%,
      rgba(255,255,255,0.2) 50%,
      transparent 100%
    );
    transition: left 0.7s ease;
  }

  #bouton-revenir:hover::before {
    left: 100%;
  }
</style>

<!-- Script pour ajouter les éléments visuels améliorés -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Ajouter l'effet de brouillard pour Transylvanie
    const fogEffect = document.createElement('div');
    fogEffect.className = 'fog-effect';
    document.body.appendChild(fogEffect);
    
    // Ajouter l'effet de vignette
    const vignetteEffect = document.createElement('div');
    vignetteEffect.className = 'vignette-effect';
    document.body.appendChild(vignetteEffect);
    
    // Ajouter le conteneur de parchemin pour les paragraphes de Transylvanie
    const passage2 = document.getElementById('passage-2');
    if (passage2) {
      const title = passage2.querySelector('.title');
      const paragraphs = passage2.querySelectorAll('p');
      const continueButton = passage2.querySelector('.continue-button');
      
      // Créer le conteneur de parchemin
      const parchmentContainer = document.createElement('div');
      parchmentContainer.className = 'parchment-container';
      
      // Déplacer les paragraphes dans le conteneur de parchemin
      paragraphs.forEach(p => {
        passage2.removeChild(p);
        parchmentContainer.appendChild(p);
      });
      
      // Ajouter le conteneur après le titre
      if (title && title.nextSibling) {
        passage2.insertBefore(parchmentContainer, title.nextSibling);
      } else {
        passage2.appendChild(parchmentContainer);
      }
      
      // Créer la barre de narration
      const narrationBar = document.createElement('div');
      narrationBar.className = 'narration-bar';
      
      // Créer le bouton de narration
      const narrationButton = document.createElement('button');
      narrationButton.className = 'narration-button';
      narrationButton.id = 'narrationButton';
      narrationButton.innerHTML = '<span>🔊</span> Écouter la narration';
      
      // Ajouter le bouton à la barre
      narrationBar.appendChild(narrationButton);
      
      // Ajouter la barre après le titre
      passage2.insertBefore(narrationBar, title.nextSibling);
      
      // Réattacher le bouton continuer à la fin
      if (continueButton) {
        passage2.appendChild(continueButton);
      }
    }
  });
</script>
  <meta charset="UTF-8">
  <title>Le Château de Dracula</title>
  <style>
  
    /* Styles de base */
    body { 
      background-color: #000; 
      color: #ccc;
      font-family: 'Georgia', serif;
      font-size: 1.1em;
      line-height: 1.6;
      margin: 0;
      padding: 0;
    }

    /* Style pour l'élément scene-background */
    #scene-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -5; /* Derrière le contenu */
      pointer-events: none;
    }
    
    /* Style pour l'image dans scene-background */
    #scene-background img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0.7;
    }

    .passage {
      max-width: 800px;
      margin: 30px auto;
      padding: 20px;
      position: relative;
      z-index: 10; /* Au-dessus du fond */
    }
    
    .hidden {
      display: none;
    }
    
    .title {
      font-size: 3em;
      text-align: center;
      color: #800;
      text-shadow: 2px 2px 4px #000;
      letter-spacing: 3px;
      font-variant: small-caps;
      margin-bottom: 20px;
    }
    
    .author {
      text-align: center;
      font-style: italic;
      margin-bottom: 30px;
      opacity: 0.8;
    }
    
    .start-button, .choice-button, .continue-button {
      display: block;
      width: 250px;
      margin: 30px auto;
      padding: 15px 25px;
      background: linear-gradient(to bottom, #600, #300);
      color: #fff;
      text-align: center;
      text-decoration: none;
      border-radius: 5px;
      font-size: 1.2em;
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
      position: relative;
      z-index: 20; /* Pour s'assurer que les boutons sont cliquables */
    }
    
    .start-button:hover, .choice-button:hover, .continue-button:hover {
      background: linear-gradient(to bottom, #800, #500);
      transform: scale(1.05);
      box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
    }
    
    .choices-title {
      text-align: center;
      font-weight: bold;
      margin: 40px 0 20px;
      font-size: 1.2em;
      color: #800;
    }
    
    .choices {
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
    }
    
    .choices a {
      display: block;
      padding: 15px 25px;
      background-color: #300;
      color: #fff;
      text-decoration: none;
      border-radius: 5px;
      transition: all 0.3s ease;
      border: 1px solid #500;
      min-width: 250px;
      text-align: center;
    }
    
    .choices a:hover {
      background-color: #600;
      transform: scale(1.05);
      box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
    }
    
    #sidebar {
      position: fixed;
      left: 0;
      top: 0;
      height: 100%;
      z-index: 9999;
    }
    
    .sidebar-toggle {
      background-color: #500;
      color: #fff;
      padding: 10px 15px;
      border: none;
      cursor: pointer;
      font-size: 1em;
      margin: 10px;
      border-radius: 5px;
      transition: background-color 0.3s;
    }
    
    .sidebar-toggle:hover {
      background-color: #800;
    }
    
    .sidebar-content {
      width: 250px;
      background-color: #000;
      color: #ccc;
      height: 100%;
      padding: 20px;
      box-shadow: 2px 0 10px rgba(0, 0, 0, 0.5);
      transform: translateX(-270px);
      transition: transform 0.4s ease;
      overflow-y: auto;
    }
    
    .sidebar-content.open {
      transform: translateX(0);
    }
    
    .sidebar-content h3 {
      color: #800;
      margin-top: 20px;
      margin-bottom: 10px;
    }
    
    .sidebar-content ul {
      list-style: none;
      padding-left: 0;
      margin: 0 0 15px 0;
    }
    
    .sidebar-content li {
      margin-bottom: 5px;
    }

    /* Style pour les dés */    
    .die {
      display: inline-block;
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, #400, #800);
      color: #fff;
      text-align: center;
      line-height: 50px;
      margin: 0 10px;
      border-radius: 5px;
      font-weight: bold;
      box-shadow: 0 0 10px rgba(255, 0, 0, 0.3);
    }
    
    /* Animation pour le lancer de dé */
    @keyframes diceRoll {
      0% { transform: rotate(0) scale(1); }
      25% { transform: rotate(-10deg) scale(1.1); }
      75% { transform: rotate(10deg) scale(1.1); }
      100% { transform: rotate(0) scale(1); }
    }
    
    .die.rolling {
      animation: diceRoll 0.3s ease-in-out;
      background: linear-gradient(135deg, #800, #c00);
    }
    
    /* Style pour l'encadré de texte */
    .text-frame {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background-color: rgba(0, 0, 0, 0.85);
      border: 2px solid #500;
      box-shadow: 0 0 20px rgba(128, 0, 0, 0.5), inset 0 0 15px rgba(128, 0, 0, 0.3);
      height: 200px;
      z-index: 100;
      padding: 0;
      transition: height 0.4s ease;
      overflow: hidden;
      display: none;
    }
    
    .text-frame-header {
      height: 30px;
      background-color: #300;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 10px;
      border-bottom: 1px solid #800;
      cursor: pointer;
    }

    .text-frame-title {
      color: #fff;
      font-variant: small-caps;
      letter-spacing: 1px;
      font-size: 1em;
    }

    .text-frame-controls {
      display: flex;
      gap: 10px;
    }

    .text-frame-controls button {
      background: none;
      border: none;
      color: #aaa;
      cursor: pointer;
      transition: color 0.3s;
      font-size: 1.2em;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
    }

    .text-frame-controls button:hover {
      color: #fff;
    }

    .text-content {
      height: calc(100% - 30px);
      overflow-y: auto;
      padding: 15px 25px;
      color: #ccc;
      font-family: 'Georgia', serif;
      line-height: 1.6;
      scrollbar-width: thin;
      scrollbar-color: #500 #000;
    }
    
    .image-container {
      position: relative;
      width: 100%;
      height: calc(100vh - 230px);
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: height 0.4s ease;
    }

    /* AMÉLIORATIONS POUR L'ÉCRAN DE CRÉATION DE JONATHAN HARKER */
    
    /* Layout deux colonnes pour création de personnage */
    .character-creation-layout {
      display: flex;
      justify-content: space-between;
      position: relative;
      margin-top: 20px;
    }

    /* Colonne de stats - à gauche */
    .stats-column {
      width: 55%;
      background-color: rgba(0, 0, 0, 0.7);
      border: 1px solid #800;
      box-shadow: 0 0 20px rgba(128, 0, 0, 0.3);
      padding: 25px;
      border-radius: 5px;
    }

    /* Tableau des caractéristiques amélioré */
    .stats-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0 10px;
      margin: 20px 0;
    }

    .stats-table td {
      padding: 8px;
      vertical-align: middle;
    }

    .stats-table td:first-child {
      width: 120px;
      font-weight: bold;
      font-size: 1.1em;
      color: #a00;
      text-shadow: 1px 1px 2px #000;
    }

    .stats-header {
      text-align: center;
      font-size: 1.4em;
      margin-bottom: 20px;
      color: #b00;
      text-shadow: 2px 2px 4px #000;
    }

    /* Style amélioré pour les dés */
    .creation-die {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #500, #900);
      color: #fff;
      font-size: 1.8em;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
      margin: 0 auto;
      box-shadow: 0 0 15px rgba(255, 0, 0, 0.3);
      text-shadow: 1px 1px 3px #000;
      position: relative;
    }

    /* Colonne de portrait - à droite */
    .portrait-column {
      width: 40%;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .portrait-frame {
      position: relative;
      width: 100%;
      max-width: 280px;
      margin-bottom: 20px;
    }

    .portrait-frame::before {
      content: '';
      position: absolute;
      top: -10px;
      left: -10px;
      right: -10px;
      bottom: -10px;
      border: 2px solid #700;
      box-shadow: 0 0 20px rgba(128, 0, 0, 0.5);
      z-index: -1;
      background-color: rgba(0, 0, 0, 0.4);
    }

    .portrait-image {
      width: 100%;
      height: auto;
      display: block;
      border: 1px solid #500;
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.7);
    }

    /* Style amélioré pour les boutons de lancer */
    .roll-button {
      background: linear-gradient(to bottom, #700, #400);
      color: #fff;
      border: none;
      border-radius: 5px;
      padding: 8px 15px;
      font-size: 0.9em;
      cursor: pointer;
      transition: all 0.3s ease;
      margin: 0 auto;
      display: block;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
    }

    .roll-button:hover {
      background: linear-gradient(to bottom, #900, #600);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(128, 0, 0, 0.4);
    }

    .roll-button:active {
      transform: translateY(1px);
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    }

    /* Section d'argent améliorée */
    .money-section {
      background-color: rgba(0, 0, 0, 0.7);
      border: 1px solid #800;
      box-shadow: 0 0 20px rgba(128, 0, 0, 0.3);
      padding: 15px;
      border-radius: 5px;
      text-align: center;
      margin-top: 20px;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .money-title {
      font-size: 1.1em;
      color: #b00;
      margin-bottom: 10px;
    }

    .money-value-container {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 10px;
    }

    .money-value {
      font-size: 1.6em;
      color: #b80;
      font-weight: bold;
      text-shadow: 1px 1px 2px #000;
    }

    /* Style pour les tooltips */
    .stat-label {
      position: relative;
      display: inline-block;
      cursor: help;
    }
    
    .stat-label::after {
      content: 'ⓘ';
      font-size: 0.8em;
      margin-left: 5px;
      color: #888;
    }
    
    .stat-tooltip {
      position: absolute;
      background-color: rgba(0, 0, 0, 0.9);
      color: #ccc;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #700;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
      width: 200px;
      font-size: 0.9em;
      z-index: 100;
      visibility: hidden;
      opacity: 0;
      transition: opacity 0.3s;
      left: 120%;
      top: -50%;
    }
    
    .stat-label:hover .stat-tooltip {
      visibility: visible;
      opacity: 1;
    }

    /* Animation pour l'apparition du portrait */
    @keyframes portraitFadeIn {
      0% { opacity: 0; transform: scale(0.9); }
      100% { opacity: 1; transform: scale(1); }
    }
    
    /* Amélioration pour le bouton de démarrage */
    .choice-button {
      background: linear-gradient(to bottom, #600, #300);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
    }
    
    .choice-button:hover {
      background: linear-gradient(to bottom, #800, #500);
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 10px 25px rgba(128, 0, 0, 0.5);
    }
    
    /* Amélioration pour Dracula */
    .dracula-image {
      max-width: 400px;
      height: auto;
      animation: draculaFadeIn 1.5s ease-out forwards;
    }
    
    @keyframes draculaFadeIn {
      0% { opacity: 0; transform: scale(0.8) translateX(50px); }
      100% { opacity: 1; transform: scale(1) translateX(0); }
    }
	
	#bouton-revenir {
    position: fixed;
    bottom: 20px;
    left: 20px;
    padding: 10px 15px;
    background-color: #600; /* Couleur rouge foncé Dracula */
    color: #ffffff;          /* Texte blanc */
    font-size: 16px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    z-index: 9999;          /* S'assure que le bouton est devant tout */
    box-shadow: 0 3px 8px rgba(0,0,0,0.3);
    transition: background-color 0.2s ease-in-out;
  }

  #bouton-revenir:hover {
    background-color: #900; /* Rouge un peu plus vif au survol */
  }
	
  </style>
  
</head>
<body>
  <!-- Éléments pour le fond d'écran -->
  <div id="scene-background"></div>
  <div class="transylvania-background" id="transylvania-bg"></div>
  <div class="rain" id="rain-effect"></div>
  <div class="lightning" id="lightning-effect"></div>

  <!-- Menu latéral -->
  <div id="sidebar">
    <button class="sidebar-toggle" onclick="toggleSidebar()">Menu</button>
    <div class="sidebar-content" id="sidebarContent">
      <h3>Caractéristiques</h3>
      <p id="player-stats">
        RAPIDITÉ : <span id="stat-rapidite">-</span><br>
        COURAGE : <span id="stat-courage">-</span><br>
        FORCE : <span id="stat-force">-</span><br>
        HABILETÉ : <span id="stat-habilete">-</span><br>
        PSI : <span id="stat-psi">-</span>
      </p>
      <h3>Inventaire</h3>
      <ul id="player-inventory">
        <li>Aucun objet</li>
      </ul>
      <h3>Pouvoirs</h3>
      <ul id="player-powers">
        <li>Aucun pouvoir</li>
      </ul>
    </div>
  </div>

  <!-- Écran titre -->
  <div id="passage-1" class="passage">
    <div class="title">Le Château de Dracula</div>
    <div class="author">par J.H. Brennan, adaptation interactive</div>
	
	
	  <p>Au loin, un loup hurle. Aussitôt, comme si le ciel lui répondait, un éclair
illumine brièvement la forêt ténébreuse. Puis, dans le grondement du
tonnerre, la scène est brutalement replongée dans l'obscurité. Telle la
cicatrice d'un coup de sabre sur le visage d'un géant, une route déserte
balafre la forêt en se faufilant parmi les arbres comme un serpent rampant vers un destin inexorable. Une pluie torrentielle cingle ce fragile
ruban, ruisselant entre les feuilles et courbant les troncs secoués par le
vent furieux dont les plaintes et les gémissements évoquent une âme en
détresse.</p>
    <button class="start-button" onclick="showPassage('passage-2')">Commencer l'aventure</button>
  </div>

  <!-- Passage "La Transylvanie" -->
  <div id="passage-2" class="passage hidden">
    <div class="title">La Transylvanie</div>
	
        

    <p>Le cocher doit se cramponner à ses rênes pour reprendre le contrôle de
son attelage. Le bruit du tonnerre se fond progressivement dans un vacarme assourdissant qui se
décompose progressivement en claquement de sabots, en cliquetis de harnais, en fracas de roues
cerclées de fer. Un fouet claque, des chevaux s'ébrouent. Une voiture noire apparaît, tanguant sur
la route comme un bateau sur la mer. Les chevaux ont l'écume à la bouche, les yeux fous. Le
cocher, dont la pèlerine flotte au vent, est un gaillard robuste, un homme capable, expérimenté,
aux épaules larges et aux mains puissantes. Et, pourtant, lui aussi paraît effrayé.</p>

    <p>La route se met à monter. En s'élevant, elle émerge de la forêt pour déboucher dans une lande
désolée, battue par la pluie, parsemée de rochers dont les formes tourmentées prennent, à
chaque éclair, l'aspect de fantômes hideux. — Allez, hue ! crie le cocher. Mais les chevaux n'ont
pas besoin d'être encouragés car ils galopent déjà comme s'ils avaient le diable à leurs trousses.</p>

    <p>La route continue à grimper de lacet en lacet, et la lueur des éclairs permet maintenant de voir
où elle conduit: à un château lugubre, obscur, dont la sinistre silhouette semble tapie au sommet
de la butte derrière de lourdes grilles de fer. La voiture noire et ses chevaux épouvantés ne vont
pas tarder à l'atteindre.</p>
    
    <p>Nous sommes en Transylvanie, un pays reculé, presque primitif, de l'Europe centrale, que la
plupart des voyageurs évitent et qui exerce généralement une étrange influence sur les rares
personnes suffisamment téméraires pour s'y aventurer. Nous sommes en Transylvanie, une
région de forêts denses et de villages isolés dont l'organisation sociale n'a guère connu de
changement depuis le temps des seigneurs féodaux. Nous sommes en Transylvanie où les gens
superstitieux se signent quand la nuit tombe et suspendent des chapelets d'ail au-dessus de leurs
fenêtres soigneusement closes pour conjurer d'antiques maléfices dont les pays plus civilisés ont
depuis longtemps perdu le souvenir.</p>
    
    <p>La banquette de la voiture noire est occupée par un personnage solitaire, enveloppé d'une lourde
cape qui dissimule son visage, ne laissant voir que ses yeux, au fond desquels brûle un feu sombre
animé par instants de lueurs rougeâtres. Tandis que la voiture cahote vers sa hideuse destination
au milieu des éléments déchaînés, le voyageur solitaire demeure aussi immobile qu'une statue.
Qui peut bien être cet homme, pour s'apprêter aussi calmement à braver la nuit et à affronter les
horreurs de ce repaire moyenâgeux ? Quel est donc l'inconnu assis dans cette voiture noire qui se
précipite à un train d'enfer vers les hautes grilles du Château de Dracula? Qui, en vérité... sinon
vous?</p>
    
    <button class="continue-button" onclick="showCharacterChoice()">Continuer</button>
  </div>

  <!-- Écran de choix de personnage -->
  <div id="character-choice" class="passage hidden">
    <div class="title">Choisissez votre personnage</div>
    
    <p>Qui serez-vous dans cette aventure gothique ?</p>
    
    <div class="choices">
      <a href="#" onclick="showPassage('creation-jonathan')">Jonathan Harker</a>
      <a href="#" onclick="showPassage('creation-dracula')">Comte Dracula</a>
    </div>
  </div>

  <!-- Passage de création pour Dracula -->
  <div id="creation-dracula" class="passage hidden">
    <div class="title">Création du Comte Dracula</div>
    
    <div class="character-creation-layout">
      <!-- Colonne de stats -->
      <div class="stats-column">
        <div class="stats-header">Caractéristiques du Vampire</div>
        
        <table class="stats-table">
          <tr>
            <td>
              <span class="stat-label">RAPIDITÉ
                <div class="stat-tooltip">Vitesse surhumaine vous permettant de vous déplacer comme une ombre.</div>
              </span>
            </td>
            <td><div id="dracula-rapidite" class="creation-die">-</div></td>
            <td><button class="roll-button" onclick="rollStat('dracula-rapidite')">Lancer</button></td>
          </tr>
          <tr>
            <td>
              <span class="stat-label">COURAGE
                <div class="stat-tooltip">Détermination et résistance face aux chasseurs de vampires.</div>
              </span>
            </td>
            <td><div id="dracula-courage" class="creation-die">-</div></td>
            <td><button class="roll-button" onclick="rollStat('dracula-courage')">Lancer</button></td>
          </tr>
          <tr>
            <td>
              <span class="stat-label">FORCE
                <div class="stat-tooltip">Puissance surnaturelle capable de plier le fer et de briser des os.</div>
              </span>
            </td>
            <td><div id="dracula-force" class="creation-die">-</div></td>
            <td><button class="roll-button" onclick="rollStat('dracula-force')">Lancer</button></td>
          </tr>
          <tr>
            <td>
              <span class="stat-label">HABILETÉ
                <div class="stat-tooltip">Précision et adresse dans la manipulation de vos pouvoirs vampiriques.</div>
              </span>
            </td>
            <td><div id="dracula-habilete" class="creation-die">-</div></td>
            <td><button class="roll-button" onclick="rollStat('dracula-habilete')">Lancer</button></td>
          </tr>
          <tr>
            <td>
              <span class="stat-label">PSI
                <div class="stat-tooltip">Pouvoir mental pour contrôler l'esprit des mortels et communiquer avec les créatures de la nuit.</div>
              </span>
            </td>
            <td><div id="dracula-psi" class="creation-die">-</div></td>
            <td><button class="roll-button" onclick="rollStat('dracula-psi')">Lancer</button></td>
          </tr>
        </table>
        
        <div class="money-section">
          <div class="money-title">Fortune initiale</div>
          <div class="money-value-container">
            <span id="dracula-money-value" class="money-value">-</span>
          </div>
          <button class="roll-button" onclick="rollMoney('dracula')">Lancer</button>
        </div>
      </div>
      
      <!-- Colonne de portrait -->
      <div class="portrait-column">
        <div class="portrait-frame">
          <img src="https://raw.githubusercontent.com/brizoss/chateau-dracula-assets/a4b296d8cc1c3309159f33e810b303513ca2ce4d/img/chauve-souris.png" 
               alt="Comte Dracula" 
               class="dracula-image" />
        </div>
        
        <div style="margin-top: 20px; text-align: center; background-color: rgba(0,0,0,0.7); padding: 15px; border-radius: 5px; border: 1px solid #700;">
          <h3 style="margin-top: 0; color: #b00;">Comte Dracula</h3>
          <p style="margin-bottom: 0;">Seigneur des vampires, maître des ténèbres et souverain de la Transylvanie. Votre soif de sang est insatiable.</p>
        </div>
      </div>
    </div>
       <!-- Bouton pour continuer après avoir lancé la fortune -->
          <button id="dracula-continue" class="continue-button hidden" style="display: none; margin-top: 20px; background: linear-gradient(to bottom, #600, #300); color: #fff; padding: 10px 20px; border-radius: 5px; border: 1px solid #800; cursor: pointer;" onclick="goToPortail()">Continuer l'aventure</button>
        </div>
      </div>
   


  </div>

  <!-- Passage de création pour Jonathan Harker -->
  <div id="creation-jonathan" class="passage hidden">
    <div class="title">Création de Jonathan Harker</div>
    
    <div class="character-creation-layout">
      <!-- Colonne de stats -->
      <div class="stats-column">
        <div class="stats-header">Caractéristiques du Personnage</div>
        
        <table class="stats-table">
          <tr>
            <td>
              <span class="stat-label">RAPIDITÉ
                <div class="stat-tooltip">Détermine votre agilité et votre vitesse de réaction face au danger.</div>
              </span>
            </td>
            <td><div id="Jonathan-rapidite" class="creation-die">-</div></td>
            <td><button class="roll-button" onclick="rollStat('Jonathan-rapidite')">Lancer</button></td>
          </tr>
          <tr>
            <td>
              <span class="stat-label">COURAGE
                <div class="stat-tooltip">Votre résistance face à la peur et capacité à affronter l'horreur.</div>
              </span>
            </td>
            <td><div id="Jonathan-courage" class="creation-die">-</div></td>
            <td><button class="roll-button" onclick="rollStat('Jonathan-courage')">Lancer</button></td>
          </tr>
          <tr>
            <td>
              <span class="stat-label">FORCE
                <div class="stat-tooltip">Votre puissance physique pour le combat et les épreuves de force.</div>
              </span>
            </td>
            <td><div id="Jonathan-force" class="creation-die">-</div></td>
            <td><button class="roll-button" onclick="rollStat('Jonathan-force')">Lancer</button></td>
          </tr>
          <tr>
            <td>
              <span class="stat-label">HABILETÉ
                <div class="stat-tooltip">Votre adresse manuelle et capacité à manipuler des objets avec précision.</div>
              </span>
            </td>
            <td><div id="Jonathan-habilete" class="creation-die">-</div></td>
            <td><button class="roll-button" onclick="rollStat('Jonathan-habilete')">Lancer</button></td>
          </tr>
          <tr>
            <td>
              <span class="stat-label">PSI
                <div class="stat-tooltip">Votre force psychique et résistance mentale face aux pouvoirs surnaturels.</div>
              </span>
            </td>
            <td><div id="Jonathan-psi" class="creation-die">-</div></td>
            <td><button class="roll-button" onclick="rollStat('Jonathan-psi')">Lancer</button></td>
          </tr>
        </table>
        
        <div class="money-section">
          <div class="money-title">Fortune initiale</div>
          <div class="money-value-container">
            <span id="Jonathan-money-value" class="money-value">-</span>
          </div>
          <button class="roll-button" onclick="rollMoney('Jonathan')">Lancer</button>
          
          <!-- Bouton pour continuer après avoir lancé la fortune -->
          <button id="jonathan-continue" class="continue-button hidden" style="display: none; margin-top: 20px; background: linear-gradient(to bottom, #600, #300); color: #fff; padding: 10px 20px; border-radius: 5px; border: 1px solid #800; cursor: pointer;" onclick="goToPortail()">Continuer l'aventure</button>
        </div>
      </div>
      
      <!-- Colonne de portrait -->
      <div class="portrait-column">
        <div class="portrait-frame">
          <img src="https://raw.githubusercontent.com/brizoss/chateau-dracula-assets/f98913b21c18fe694f78179011c1655ccba1fc4c/img/jonathan_harker_portrait.png"
               alt="Jonathan Harker" 
               class="portrait-image" />
        </div>
        
        <div style="margin-top: 20px; text-align: center; background-color: rgba(0,0,0,0.7); padding: 15px; border-radius: 5px; border: 1px solid #700;">
          <h3 style="margin-top: 0; color: #b00;">Jonathan Harker</h3>
          <p style="margin-bottom: 0;">Jeune clerc de notaire envoyé en Transylvanie pour finaliser la vente d'une propriété au mystérieux Comte Dracula.</p>
        </div>
      </div>
    </div>
  


  </div>
    
  <!-- Encadré de texte -->
  <div class="text-frame" id="text-frame">
    <div class="text-frame-header" id="text-frame-header">
      <div class="text-frame-title">Château de Dracula</div>
      <div class="text-frame-controls">
        <button id="minimize-btn" title="Réduire">&#8722;</button>
        <button id="expand-btn" title="Agrandir">&#8593;</button>
      </div>
    </div>
    <div class="text-content" id="text-content"></div>
  </div>
  
  <!-- Conteneur pour l'image -->
  <div class="image-container" id="game-image-container"></div>
  
  <!-- Éléments audio cachés -->
  <!-- Élément audio principal -->
<audio id="background-music" preload="auto" loop>
  <source src="https://fluffy-kashata-47db51.netlify.app/son/404_vampyr.mp3" type="audio/mpeg">
</audio>

<!-- Éléments audio pour effets sonores -->
<audio id="thunder-sound" preload="auto">
  <source src="https://fluffy-kashata-47db51.netlify.app/son/thunder.mp3" type="audio/mpeg">
</audio>
<audio id="rain-sound" preload="auto" loop>
  <source src="https://fluffy-kashata-47db51.netlify.app/son/rain.mp3" type="audio/mpeg">
</audio>
<audio id="wolf-sound" preload="auto">
  <source src="https://fluffy-kashata-47db51.netlify.app/son/wolf.mp3" type="audio/mpeg">
</audio>
<audio id="wind-sound" preload="auto" loop>
  <source src="https://fluffy-kashata-47db51.netlify.app/son/ff_hffx_atmosphere_storm_windy.wav" type="audio/wav">
</audio>
<audio id="dice-sound" preload="auto">
  <source src="https://fluffy-kashata-47db51.netlify.app/son/dice.mp3" type="audio/mpeg">
</audio>
<audio id="wolf-sound" preload="auto">
  <source src="https://fluffy-kashata-47db51.netlify.app/son/ff_hffx_sfx_impact_jump_scare_blue.wav" type="audio/wav">
</audio> 

  <!-- Interface de combat -->
  <div id="combat-interface" class="combat-interface" style="display: none;">
    <div class="combat-header">
      <div class="combatant player">
        <h3>Vous</h3>
        <div class="health-bar">
          <div class="health-bar-bg">
            <div id="player-health-fill" class="health-bar-fill"></div>
          </div>
          <span id="player-combat-health">100</span>/<span id="player-combat-max-health">100</span>
        </div>
      </div>
      
      <div class="vs">VS</div>
      
      <div class="combatant enemy">
        <h3 id="enemy-combat-name">Ennemi</h3>
        <div class="health-bar">
          <div class="health-bar-bg">
            <div id="enemy-health-fill" class="health-bar-fill"></div>
          </div>
          <span id="enemy-combat-health">50</span>/<span id="enemy-combat-max-health">50</span>
        </div>
      </div>
    </div>
    
    <div class="combat-dice">
      <div id="combat-die-1" class="die">?</div>
      <div id="combat-die-2" class="die">?</div>
      <div id="combat-roll-result" class="dice-result">Lancez les dés</div>
    </div>
    
    <div class="combat-log-container">
      <div id="combat-log" class="combat-log">
        <div class="log-entry">Le combat commence !</div>
      </div>
    </div>
    
    <div class="combat-actions">
      <button id="attack-button" class="combat-button" onclick="attackEnemy()">Attaquer</button>
      <button id="use-psi-button" class="combat-button" onclick="usePsiPower()">Pouvoir PSI</button>
      <button id="flee-button" class="combat-button" onclick="attemptToFlee()">Fuir</button>
    </div>
  </div>

  <!-- Interface pour lancer des dés -->
  <div id="dice-roll-interface" class="dice-interface" style="display: none;">
    <div id="dice-roll-purpose" class="dice-purpose">Lancer pour déterminer le résultat</div>
    <div class="dice-container">
      <div id="game-die-1" class="die">?</div>
      <div id="game-die-2" class="die">?</div>
    </div>
    <div id="dice-roll-result" class="dice-result">?</div>
    <button class="dice-button" onclick="rollGameDice()">Lancer les dés</button>
  </div>
</div>

  <!-- JavaScript -->
  <script>
    // Variables audio
    let audioEnabled = true;
    const audioElements = {
      thunder: document.getElementById('thunder-sound'),
      rain: document.getElementById('rain-sound'),
      wolf: document.getElementById('wolf-sound'),
      wind: document.getElementById('wind-sound'),
      dice: document.getElementById('dice-sound'),
      background: document.getElementById('background-music')
    };

    // Fonction pour lire un son
    function playSound(soundId, volume = 1.0) {
      if (!audioEnabled) return;
      
      const sound = audioElements[soundId];
      if (sound) {
        sound.volume = volume;
        sound.currentTime = 0;
        sound.play().catch(error => {
          console.warn('Lecture audio impossible :', error);
        });
      }
    }

    // Fonction pour démarrer un son en boucle
    function loopSound(soundId, volume = 0.4) {
      if (!audioEnabled) return;
      
      const sound = audioElements[soundId];
      if (sound) {
        sound.volume = volume;
        sound.loop = true;
        sound.play().catch(error => {
          console.warn('Lecture audio en boucle impossible :', error);
        });
      }
    }

    // Fonction pour arrêter un son
    function stopSound(soundId) {
      const sound = audioElements[soundId];
      if (sound) {
        sound.pause();
        sound.currentTime = 0;
      }
    }

    // Fonction pour activer/désactiver tous les sons
    function toggleAudio() {
      audioEnabled = !audioEnabled;
      
      // Mettre à jour le bouton
      const audioButton = document.getElementById('audioToggle');
      if (audioButton) {
        audioButton.innerHTML = audioEnabled ? '<span>🔊 Son</span>' : '<span>🔇 Son</span>';
      }
      
      // Activer/désactiver tous les sons
      if (audioEnabled) {
        if (document.getElementById('passage-1').classList.contains('hidden') ||
            document.getElementById('passage-2').classList.contains('hidden')) {
          loopSound('background', 0.3);
        }
        if (!document.getElementById('passage-2').classList.contains('hidden')) {
          loopSound('rain', 0.3);
          loopSound('wind', 0.2);
        }
      } else {
        for (const key in audioElements) {
          stopSound(key);
        }
      }
      
      console.log('Audio ' + (audioEnabled ? 'activé' : 'désactivé'));
    }

    // Démarrer les sons d'ambiance au chargement
    document.addEventListener('DOMContentLoaded', function() {
      // Mettre un délai pour éviter les problèmes d'autoplay restrictifs
      setTimeout(() => {
        if (audioEnabled) {
          loopSound('background', 0.3);
        }
      }, 1000);
      
      // Connecter le bouton audio
      const audioButton = document.getElementById('audioToggle');
      if (audioButton) {
        audioButton.addEventListener('click', toggleAudio);
      }
    });

    // Initialisation de gameState
    window.gameState = {
      stats: { 
        rapidite: 0, 
        courage: 0, 
        force: 0, 
        habilete: 0, 
        psi: 0, 
        psiMax: 0, 
        health: 100, 
        maxHealth: 100, 
        money: 0 
      },
      inventory: [],
      enemyDefeated: {},
      combat: { 
        inCombat: false, 
        turn: null, 
        enemy: {} 
      },
      diceRollCallback: null,
      character: null,
      currentLocation: null,
      previousLocation: null,
      activeEffects: {}
    };

    // Fonctions
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebarContent');
      sidebar.classList.toggle('open');
    }
    
    // Fonction pour afficher un passage et cacher les autres
    function showPassage(passageId) {
      // Cacher tous les passages
      document.querySelectorAll('.passage').forEach(el => {
        el.classList.add('hidden');
      });
      
      // Afficher le passage demandé
      const passageElement = document.getElementById(passageId);
      if (passageElement) {
        passageElement.classList.remove('hidden');
        
        // Gestion des sons en fonction du passage
        if (passageId === 'passage-1') {
          // Écran titre
          stopSound('rain');
          stopSound('wind');
          loopSound('background', 0.3);
        } 
        else if (passageId === 'passage-2') {
          // Passage Transylvanie
          playSound('thunder', 0.7);
          setTimeout(() => playSound('wolf', 0.5), 2000);
          loopSound('rain', 0.3);
          loopSound('wind', 0.2);
        }
        else if (passageId === 'creation-jonathan' || passageId === 'creation-dracula') {
          // Écrans de création
          stopSound('rain');
          stopSound('wind');
          loopSound('background', 0.3);
        }
      }
    }
    
    // Fonction pour afficher le choix de personnage
    function showCharacterChoice() {
      showPassage('character-choice');
    }

	function rollStat(statId) {
	if (!window.gameState) window.gameState = {};
  if (!window.gameState.stats) window.gameState.stats = {};
		const statElement = document.getElementById(statId);
		if (!statElement) return;
  
		const statName = statId.split('-')[1];
		const value = Math.floor(Math.random() * 6) + 1;
  
		statElement.textContent = value;
  
		const sidebarElement = document.getElementById(`stat-${statName}`);
		if (sidebarElement) {
		sidebarElement.textContent = value;
		}
  
  // Mise à jour de gameState
  if (!gameState.stats) gameState.stats = {};
  gameState.stats[statName] = value;
}

    // Fonction pour gérer le lancement de la fortune
    function rollMoney(character) {
        console.log(`Rolling money for ${character}`);
        // ... code existant ...
        
        // Afficher le bouton continuer
        const continueButton = document.getElementById(`${character}-continue`);
        console.log(`Continue button: ${continueButton ? 'found' : 'not found'}`);
        if (continueButton) {
            continueButton.style.display = 'block';
            console.log(`Setting button onclick for ${character}`);
        }
    }

    function checkAllStatsRolled(character) {
      const stats = ['rapidite', 'courage', 'force', 'habilete', 'psi'];
      let allRolled = true;
      
      // Vérifier chaque statistique
      for (const stat of stats) {
        const statElement = document.getElementById(`${character}-${stat}`);
        if (statElement && statElement.textContent === '-') {
          allRolled = false;
          break;
        }
      }
      
      // Si toutes les stats sont lancées, montrer le bouton continuer
      if (allRolled) {
        const continueButton = document.getElementById(`${character}-continue`);
        if (continueButton) {
          continueButton.classList.remove('hidden');
        }
      }
    }

    window.startGame = function(character) {
  console.log("Démarrage du jeu avec:", character);
  
  // Masquer tous les écrans précédents
  document.querySelectorAll('.passage, .sequence-screen').forEach(el => {
    el.classList.add('hidden');
    el.style.display = 'none';
  });
  
  // Afficher l'écran de jeu
  const gameScreen = document.getElementById('game-screen');
  if (gameScreen) {
    gameScreen.classList.remove('hidden');
    gameScreen.style.display = 'block';
  }
  
  // Mettre à jour l'état du jeu
  if (!window.gameState) window.gameState = {};
  window.gameState.character = character;
  
  // Mise à jour du menu et des infos du joueur
  const playerNameEl = document.getElementById('player-name');
  const playerRoleEl = document.getElementById('player-role');
  
  if (playerNameEl && playerRoleEl) {
    if (character.toLowerCase() === 'jonathan') {
      playerNameEl.textContent = 'Nom: Jonathan Harker';
      playerRoleEl.textContent = 'Rôle: Chasseur de vampires';
      document.body.classList.add('jonathan-theme');
      document.body.classList.remove('dracula-theme');
    } else if (character.toLowerCase() === 'dracula') {
      playerNameEl.textContent = 'Nom: Comte Dracula';
      playerRoleEl.textContent = 'Rôle: Vampire';
      document.body.classList.add('dracula-theme');
      document.body.classList.remove('jonathan-theme');
    }
  }
  
  // Mise à jour des statistiques
  if (typeof window.updateStatsDisplay === 'function') {
    window.updateStatsDisplay();
  }
  
  // Mise à jour de l'inventaire
  if (typeof window.updateInventoryDisplay === 'function') {
    window.updateInventoryDisplay();
  }
  
  // Choisir le lieu initial et le texte narratif selon le personnage
  let startLocation, backgroundUrl, narrativeText;
  
  if (character.toLowerCase() === 'dracula') {
    startLocation = 'crypte-dracula';
    backgroundUrl = 'https://raw.githubusercontent.com/brizoss/chateau-dracula-assets/7fcd2382286fa36045466ced1230791bfba67aff/img/crypte.jpg';
    narrativeText = "Vos yeux s'ouvrent. Il y a quelqu'un devant le portail ! Vous le savez avec autant de certitude que si vous vous teniez à côté de la voiture, une torche à la main. Un instinct aiguisé par des siècles de survie vous avertit d'un danger. Aucun mortel ordinaire n'oserait venir vous chercher ici, dans le château ancestral qui est depuis si longtemps le siège de votre puissance. Un seul homme aurait l'audace d'y pénétrer : le Dr Abraham van Helsing, médecin, avocat, métaphysicien et tueur de vampires...";
  } else {
    startLocation = 'portail';
    backgroundUrl = 'https://raw.githubusercontent.com/brizoss/chateau-dracula-assets/4212d6845a41c07b62959c93f1031dfb97680410/img/all%C3%A9e_du_chateau4.jpg';
    narrativeText = "D'une main soigneusement manucurée, vous poussez les hautes grilles en fer forgé du Château de Dracula. Sans opposer de résistance, elles pivotent sur leurs gonds dans un étrange silence, troublé seulement par le hurlement lointain d'un loup. Devant vous s'étend une allée orientée au nord. Elle vous conduira au manoir démoniaque et au monstre qui en est le seigneur.";
  }
  
  // Mettre à jour l'UI avec les informations du lieu
  const locationTitle = document.getElementById('location-title');
  const locationDescription = document.getElementById('location-description');
  
  if (locationTitle && locationDescription) {
    // Utiliser les données du lieu depuis gamedata.js si disponible
    if (window.gameData && window.gameData.locations && window.gameData.locations[startLocation]) {
      const locationData = window.gameData.locations[startLocation];
      locationTitle.textContent = locationData.title || startLocation;
      locationDescription.textContent = narrativeText;
    } else {
      // Fallback si les données ne sont pas disponibles
      locationTitle.textContent = startLocation === 'crypte-dracula' ? "Crypte de Dracula" : "Allée du Château";
      locationDescription.textContent = narrativeText;
    }
  }
  
  // Mettre à jour les choix disponibles
  const choicesContainer = document.getElementById('choices-container');
  if (choicesContainer) {
    choicesContainer.innerHTML = '';
    
    if (character.toLowerCase() === 'dracula') {
      // Choix pour Dracula
      const choices = [
        { text: "Utiliser Téléportation (coûte 1 PSI)", action: "usePsiPower" },
        { text: "Examiner le sarcophage", destination: "examiner-sarcophage" },
        { text: "Rechercher un passage secret", action: "searchSecret" }
      ];
      
      choices.forEach(choice => {
        const btn = document.createElement('button');
        btn.className = 'choice';
        btn.textContent = choice.text;
        
        btn.onclick = () => {
          if (choice.destination && typeof window.navigateToLocation === 'function') {
            window.navigateToLocation(choice.destination);
          } else if (choice.action && typeof window[choice.action] === 'function') {
            window[choice.action]();
          }
        };
        
        choicesContainer.appendChild(btn);
      });
    } else {
      // Choix pour Jonathan
      const choices = [
        { text: "Continuer vers le nord", destination: "cour-honneur" },
        { text: "Explorer le sentier à l'ouest", destination: "sentier-ouest" },
        { text: "Explorer le sentier à l'est", destination: "sentier-est" },
        { text: "Rechercher un passage secret", action: "searchSecret" }
      ];
      
      choices.forEach(choice => {
        const btn = document.createElement('button');
        btn.className = 'choice';
        btn.textContent = choice.text;
        
        btn.onclick = () => {
          if (choice.destination && typeof window.navigateToLocation === 'function') {
            window.navigateToLocation(choice.destination);
          } else if (choice.action && typeof window[choice.action] === 'function') {
            window[choice.action]();
          }
        };
        
        choicesContainer.appendChild(btn);
      });
    }
  }
  
  // Utiliser scene-manager pour afficher l'image de fond
  if (window.sceneManager && typeof window.sceneManager.showScene === 'function') {
    // Note: showScene gère normalement l'affichage de l'image de fond
    // Nous lui passons null comme ID pour éviter qu'il n'essaie de gérer un passage HTML
    window.sceneManager.showScene(null, backgroundUrl);
  } else {
    // Fallback si scene-manager n'est pas disponible
    const bgElement = document.getElementById('scene-background');
    if (bgElement && backgroundUrl) {
      bgElement.innerHTML = '';
      const img = document.createElement('img');
      img.src = backgroundUrl;
      img.style.width = '100%';
      img.style.height = '100%';
      img.style.objectFit = 'cover';
      img.style.opacity = '0.7';
      bgElement.appendChild(img);
    }
  }
};

// Version simplifiée de startAdventure qui appelle startGame
window.startAdventure = function(character) {
  return window.startGame(character);
};

    
    // Initialisation de l'image d'arrière-plan
    document.addEventListener('DOMContentLoaded', function() {
      const bgElement = document.getElementById('scene-background');
      if (bgElement) {
        // Créer une image
        const img = document.createElement('img');
        img.src = 'https://raw.githubusercontent.com/brizoss/chateau-dracula-assets/e3d10d43158d9937d9952e7a1d29a798ad5fc58e/img/Dracula3.jpg';
        img.style.width = '100%';
        img.style.height = '100%';
        img.style.objectFit = 'cover';
        img.style.opacity = '0.7';
        
        // Vider l'élément et ajouter l'image
        bgElement.innerHTML = '';
        bgElement.appendChild(img);
        
        // Par défaut, montrer le premier passage
        showPassage('passage-1');
        
        console.log("Image d'arrière-plan ajoutée au chargement de la page");
      }
    });
  </script>
  <!-- Script pour corriger la navigation et maintenir le son -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // 1. CORRECTION DE LA NAVIGATION PAR PAGES
    
    // Forcer la modification de la fonction showPassage pour remplacer le scroll par des changements de page complets
    window.showPassage = function(passageId) {
      console.log("Navigation vers:", passageId);
      
      // Cacher tous les passages
      document.querySelectorAll('.passage').forEach(el => {
        el.classList.add('hidden');
        el.style.display = 'none'; // Assurer que le passage est complètement caché
      });
      
      // Afficher uniquement le passage demandé
      const passageElement = document.getElementById(passageId);
      if (passageElement) {
        passageElement.classList.remove('hidden');
        passageElement.style.display = 'block'; // Assurer que le passage est complètement visible
        
        // Remonter en haut de la page
        window.scrollTo(0, 0);
        
        // Gestion des sons en fonction du passage
        handleSoundsForPassage(passageId);
      }
    };
    
    // Fonction pour gérer les sons selon la page
    function handleSoundsForPassage(passageId) {
      console.log("Gestion du son pour:", passageId);
      
      // Références aux éléments audio
      const rainSound = document.getElementById('rain-sound');
      const thunderSound = document.getElementById('thunder-sound');
      const wolfSound = document.getElementById('wolf-sound');
      const windSound = document.getElementById('https://fluffy-kashata-47db51.netlify.app/son/ff_hffx_atmosphere_storm_windy.wav');
      const backgroundMusic = document.getElementById('https://fluffy-kashata-47db51.netlify.app/son/404_vampyr.mp3');
      
      // Vérifier si les éléments audio existent
      if (!rainSound || !thunderSound || !wolfSound || !windSound || !backgroundMusic) {
        console.warn("Certains éléments audio sont manquants!");
        return;
      }
      
      if (passageId === 'passage-1') {
        // Écran titre - Son de fond subtil
        if (backgroundMusic) {
          backgroundMusic.volume = 0.2;
          backgroundMusic.play().catch(e => console.warn("Impossible de jouer la musique:", e));
        }
      } 
      else if (passageId === 'passage-2') {
        // Passage Transylvanie - Ambiance complète
        if (rainSound) {
          rainSound.volume = 0.4;
          rainSound.loop = true;
          rainSound.play().catch(e => console.warn("Impossible de jouer la pluie:", e));
        }
        
        if (windSound) {
          windSound.volume = 0.3;
          windSound.loop = true;
          windSound.play().catch(e => console.warn("Impossible de jouer le vent:", e));
        }
        
        // Jouer le tonnerre après un court délai
        setTimeout(() => {
          if (thunderSound) {
            thunderSound.volume = 0.7;
            thunderSound.play().catch(e => console.warn("Impossible de jouer le tonnerre:", e));
          }
        }, 1500);
        
        // Jouer le loup après un délai plus long
        setTimeout(() => {
          if (wolfSound) {
            wolfSound.volume = 0.5;
            wolfSound.play().catch(e => console.warn("Impossible de jouer le loup:", e));
          }
        }, 3000);
      }
      else if (passageId === 'character-choice' || passageId.includes('creation-')) {
        // Écrans de choix et création - Maintenir la pluie en fond mais à volume réduit
        if (rainSound) {
          rainSound.volume = 0.2;
          // Ne pas arrêter la pluie, juste réduire son volume
        }
        
        if (windSound) {
          windSound.volume = 0.1;
          // Ne pas arrêter le vent, juste réduire son volume
        }
      }
    }
    
    // 2. CORRECTION DES BOUTONS POUR UTILISER LA NOUVELLE NAVIGATION
    
    // Reconfigurer tous les boutons de navigation
    function fixAllNavigationButtons() {
      // Bouton "Commencer l'aventure" sur l'écran titre
      const startButton = document.querySelector('#passage-1 .start-button');
      if (startButton) {
        startButton.onclick = function() {
          showPassage('passage-2');
        };
      }
      
      // Bouton "Continuer" sur l'écran Transylvanie
      const continueButton = document.querySelector('#passage-2 .continue-button');
      if (continueButton) {
        continueButton.onclick = function() {
          showPassage('character-choice');
        };
      }
      
      // Boutons de choix de personnage
      const choiceButtons = document.querySelectorAll('#character-choice .choices a');
      choiceButtons.forEach(button => {
        button.onclick = function(e) {
          e.preventDefault();
          const target = this.getAttribute('onclick') || '';
          if (target.includes('creation-jonathan')) {
            showPassage('creation-jonathan');
          } else if (target.includes('creation-dracula')) {
            showPassage('creation-dracula');
          }
        };
      });
    }
    
    // Appliquer les corrections après un court délai pour s'assurer que tout est chargé
    setTimeout(fixAllNavigationButtons, 500);
    
    // Afficher la première page au chargement
    showPassage('passage-1');
    
    // 3. CORRECTION DU BOUTON AUDIO
    
    // S'assurer que le bouton audio est toujours visible et fonctionne
    const audioToggle = document.getElementById('audioToggle');
    if (audioToggle) {
      audioToggle.style.position = 'fixed';
      audioToggle.style.top = '20px';
      audioToggle.style.right = '20px';
      audioToggle.style.zIndex = '9999';
      
      // Réinitialiser la fonction du bouton audio
      audioToggle.onclick = function() {
        toggleAudio();
      };
    }
    
    // Variable globale pour l'état du son
    window.audioEnabled = true;
    
    // Fonction pour activer/désactiver tous les sons
    window.toggleAudio = function() {
      window.audioEnabled = !window.audioEnabled;
      
      // Mettre à jour le bouton
      if (audioToggle) {
        audioToggle.innerHTML = window.audioEnabled ? '<span>🔊 Son</span>' : '<span>🔇 Son</span>';
      }
      
      // Liste des sons à contrôler
      const sounds = ['rain-sound', 'thunder-sound', 'wolf-sound', 'wind-sound', 'background-music'];
      
      // Activer/désactiver tous les sons
      sounds.forEach(soundId => {
        const sound = document.getElementById(soundId);
        if (sound) {
          if (window.audioEnabled) {
            // Si c'est un son en boucle, le redémarrer
            if (sound.loop) {
              sound.play().catch(e => console.warn(`Impossible de jouer ${soundId}:`, e));
            }
          } else {
            sound.pause();
          }
        }
      });
      
      console.log('Audio ' + (window.audioEnabled ? 'activé' : 'désactivé'));
    };
  });
</script>


<!-- Éléments audio avec preload pour être prêts à jouer immédiatement -->
<audio id="thunder-sound" preload="auto">
  <source src="https://raw.githubusercontent.com/brizoss/chateau-dracula-assets/main/audio/thunder.mp3" type="audio/mpeg">
</audio>
<audio id="rain-sound" preload="auto" loop>
  <source src="https://raw.githubusercontent.com/brizoss/chateau-dracula-assets/main/audio/rain.mp3" type="audio/mpeg">
</audio>
<audio id="wolf-sound" preload="auto">
  <source src="https://fluffy-kashata-47db51.netlify.app/son/ff_hffx_sfx_impact_jump_scare_blue.wav" type="audio/wav">
</audio>
<audio id="wind-sound" preload="auto" loop>
  <source src="https://raw.githubusercontent.com/brizoss/chateau-dracula-assets/main/audio/wind.mp3" type="audio/mpeg">
</audio>
<audio id="dice-sound" preload="auto">
  <source src="https://raw.githubusercontent.com/brizoss/chateau-dracula-assets/main/audio/dice.mp3" type="audio/mpeg">
</audio>
<audio id="background-music" preload="auto" loop>
  <source src="https://fluffy-kashata-47db51.netlify.app/son/404_vampyr.mp3" type="audio/mp3">
</audio>
<audio id="dracula-sound" preload="auto">
  <source src="https://fluffy-kashata-47db51.netlify.app/son/ff_hffx_sfx_impact_jump_scare_blue.wav" type="audio/wav">
</audio>
 

<!-- Bouton audio bien visible -->
<button id="audioToggle" style="position: fixed; top: 20px; right: 20px; z-index: 9999; background-color: #500; color: #fff; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer; font-size: 1em; border: 1px solid #800; box-shadow: 0 0 10px rgba(0,0,0,0.5);">
  <span>🔊 Son</span>
</button>



<!-- Système audio unifié -->


<div id="scene-background" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -5;"></div>


<!-- Données du jeu -->

<script src="main.js"></script>


<!-- Correctif spécifique pour rollMoney et le menu -->
<script src="fix-roll-money.js"></script>


<!-- Correctif spécifique pour les boutons et les dés -->
<script src="dice-button-fix.js"></script>
<!-- Bouton de retour -->
<script src="return-button.js"></script>



<!-- Élément audio principal -->
<audio id="background-music" preload="auto" loop>
  <source src="https://fluffy-kashata-47db51.netlify.app/son/404_vampyr.mp3" type="audio/mp3">
</audio>

<!-- Écran d'activation audio direct -->
<div id="direct-audio-activation" style="position:fixed; top:0; left:0; width:100%; height:100%; background-color:rgba(0,0,0,0.9); display:flex; justify-content:center; align-items:center; z-index:10000;">
  <button id="direct-audio-button" style="padding:20px 40px; font-size:1.5em; background:linear-gradient(to bottom, #900, #500); color:white; border:none; border-radius:10px; cursor:pointer;">
    Cliquez pour activer le son et commencer l'aventure
  </button>
</div>

<!-- Script d'activation audio intégré directement -->
<script>
  // Obtenir le bouton
  const directButton = document.getElementById('direct-audio-button');
  
  // Ajouter un gestionnaire d'événement au clic
  if (directButton) {
    directButton.addEventListener('click', function() {
      console.log("👉 Bouton d'activation directe cliqué");
      
      // Masquer l'écran d'activation
      document.getElementById('direct-audio-activation').style.display = 'none';
      
      // Activer l'audio global
      window.audioEnabled = true;
      
      // Jouer le son de fond directement
      const backgroundAudio = document.getElementById('background-music');
      if (backgroundAudio) {
        backgroundAudio.volume = 0.3;
        backgroundAudio.loop = true;
        backgroundAudio.play().catch(function(error) {
          console.error("❌ Impossible de jouer le son de fond:", error);
          // Afficher quand même le premier écran même si le son ne marche pas
          showFirstScreen();
        });
        
        // Afficher le premier écran
        showFirstScreen();
      } else {
        console.error("❌ Élément audio 'background-music' non trouvé");
        // Afficher quand même le premier écran
        showFirstScreen();
      }
    });
  } else {
    console.error("❌ Bouton d'activation directe non trouvé");
  }
  
  // Fonction pour afficher le premier écran
  function showFirstScreen() {
    const firstScreen = document.getElementById('passage-1');
    if (firstScreen) {
      firstScreen.classList.remove('hidden');
      firstScreen.style.display = 'block';
    } else {
      console.error("❌ Élément 'passage-1' non trouvé");
    }
  }
  
  // Fonction pour la navigation entre les passages
  window.showPassage = function(passageId) {
    console.log("Navigation vers passage:", passageId);
    
    // Cacher tous les passages
    document.querySelectorAll('.passage').forEach(function(passage) {
      passage.classList.add('hidden');
      passage.style.display = 'none';
    });
    
    // Afficher le passage demandé
    const targetPassage = document.getElementById(passageId);
    if (targetPassage) {
      targetPassage.classList.remove('hidden');
      targetPassage.style.display = 'block';
      window.scrollTo(0, 0);
    } else {
      console.error("❌ Passage non trouvé:", passageId);
    }
  };
  
  // Correction pour le bouton commencer l'aventure
  document.addEventListener('DOMContentLoaded', function() {
    const startButton = document.querySelector('.start-button');
    if (startButton) {
      startButton.addEventListener('click', function() {
        console.log("Bouton commencer l'aventure cliqué");
        window.showPassage('passage-2');
      });
    }
  });
</script>
  <!-- Écran principal de jeu -->
<div id="game-screen" class="hidden">
  <h1 id="location-title"></h1>
  <p id="location-description"></p>
  <div id="choices-container"></div>
</div>

<script>
  // Script de débogage pour images
  document.addEventListener('DOMContentLoaded', function() {
    console.log("Vérification des images...");
    
    // Vérifier scene-background
    const bgElement = document.getElementById('scene-background');
    console.log("scene-background existe:", !!bgElement);
    
    // Essayer de charger une image de test
    const testImg = new Image();
    testImg.onload = function() { console.log("✅ Image de test chargée avec succès"); };
    testImg.onerror = function() { console.log("❌ Erreur de chargement de l'image de test"); };
    testImg.src = 'https://raw.githubusercontent.com/brizoss/chateau-dracula-assets/e3d10d43158d9937d9952e7a1d29a798ad5fc58e/img/Dracula3.jpg';
    
    // Vérifier si l'image d'arrière-plan est déjà définie
    if (bgElement) {
      console.log("Contenu actuel de scene-background:", bgElement.innerHTML);
      
      // Forcer l'affichage d'une image de test
      bgElement.innerHTML = '';
      const forcedImg = document.createElement('img');
      forcedImg.src = 'https://raw.githubusercontent.com/brizoss/chateau-dracula-assets/e3d10d43158d9937d9952e7a1d29a798ad5fc58e/img/Dracula3.jpg';
      forcedImg.style.width = '100%';
      forcedImg.style.height = '100%';
      forcedImg.style.objectFit = 'cover';
      forcedImg.style.opacity = '0.7';
      bgElement.appendChild(forcedImg);
      console.log("Image de fond forcée");
    }
  });
  
  function goToPortail() {
  let character;

  // Détection automatique selon le bouton visible
  if (!document.getElementById('creation-dracula').classList.contains('hidden')) {
    character = 'dracula';
  } else if (!document.getElementById('creation-jonathan').classList.contains('hidden')) {
    character = 'jonathan';
  }

  if (character) {
    localStorage.setItem('selectedCharacter', character);
    window.location.href = 'improved-ui-v2.html';
  } else {
    alert("Aucun personnage sélectionné.");
  }
}


function goToCrypteDracula() {
    console.log("Navigation vers la crypte de Dracula");
    // Effacer le contenu actuel
    document.querySelectorAll('.passage').forEach(passage => {
        passage.classList.add('hidden');
    });
    
    // Afficher le passage de la crypte
    const cryptePassage = document.getElementById('crypte-de-dracula-passage');
    if (cryptePassage) {
        cryptePassage.classList.remove('hidden');
    } else {
        console.error("Passage de la crypte non trouvé");
    }
}
</script>
<!-- Avant la fermeture de la balise body -->

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Initialiser le gestionnaire d'état du jeu (si ce n'est pas déjà fait)
    if (window.GameStateManager && typeof window.GameStateManager.initialize === 'function') {
      window.GameStateManager.initialize();
    }
    
    // Initialiser le contrôleur UI
    if (window.UIController && typeof window.UIController.initialize === 'function') {
      window.UIController.initialize();
    }
    
    // S'assurer que le scene-manager est également initialisé
    if (window.sceneManager && window.sceneManager.showScene) {
      // Le scene-manager est déjà prêt
      console.log("Scene Manager déjà initialisé");
    }
    
    console.log("Intégration UI Controller terminée");
  });
</script>
<script>
document.addEventListener("DOMContentLoaded", function () {
  // Suppression d'un éventuel start-button
  const startButton = document.getElementById("start-button");
  if (startButton) {
    startButton.remove();
  }

  // Bouton Jonathan
  const jonContinueBtn = document.getElementById("jonathan-continue");
  if (jonContinueBtn) {
    jonContinueBtn.addEventListener("click", function () {
      console.log("Jonathan Continue cliqué, on va sur improved-ui-v2.html");
      window.location.href = "improved-ui-v2.html
";
    });
  }

  // Bouton Dracula
  const dracContinueBtn = document.getElementById("dracula-continue");
  if (!dracContinueBtn) {
    console.error("Le bouton 'dracula-continue' est introuvable !");
  } else {
    console.log("Bouton 'dracula-continue' détecté :", dracContinueBtn);
    dracContinueBtn.addEventListener("click", function () {
      console.log("Dracula Continue cliqué, on va sur improved-ui-v2.html");
      window.location.href = "improved-ui-v2.html";
    });
  }
});

</script>
<script>
// Correctif pour la fonction rollMoney
// Ce script résout le problème d'initialisation de la fortune dans l'écran de création de personnage

// On attend que le DOM soit complètement chargé
document.addEventListener('DOMContentLoaded', function() {
    console.log("🎲 Initialisation du correctif pour rollMoney");
    
    // Fonction universelle pour lancer la fortune initiale
    window.rollMoney = function(character) {
        console.log(`🎲 Lancement de la fortune pour ${character}`);
        
        // Trouver l'élément d'affichage de la fortune
        const moneyValueElement = document.getElementById(`${character}-money-value`);
        if (!moneyValueElement) {
            console.error(`❌ Élément ${character}-money-value non trouvé`);
            return;
        }
        
        // Lancer les dés (2d6 × 4)
        const die1 = Math.floor(Math.random() * 6) + 1;
        const die2 = Math.floor(Math.random() * 6) + 1;
        const total = (die1 + die2) * 4;
        
        // Jouer le son des dés
        if (window.playSound) {
            window.playSound('dice-sound', 0.5);
        }
        
        // Mettre à jour l'affichage
        moneyValueElement.textContent = total;
        console.log(`💰 Fortune générée pour ${character}: ${total}`);
        
        // Mettre à jour l'état du jeu
        if (window.gameState) {
            window.gameState.stats = window.gameState.stats || {};
            window.gameState.stats.money = total;
        }
        
        // Afficher le bouton "Continuer"
        const continueButton = document.getElementById(`${character}-continue`);
        if (continueButton) {
            continueButton.style.display = 'block';
            continueButton.classList.remove('hidden');
            console.log(`✅ Bouton Continuer affiché pour ${character}`);
        } else {
            console.error(`❌ Bouton ${character}-continue non trouvé`);
        }
        
        // Vérifier toutes les statistiques
        checkAllStatsRolled(character);
    };
    
    // Fonction pour vérifier si toutes les stats ont été lancées
    function checkAllStatsRolled(character) {
        const stats = ['rapidite', 'courage', 'force', 'habilete', 'psi'];
        const allRolled = stats.every(stat => {
            const statEl = document.getElementById(`${character}-${stat}`);
            return statEl && statEl.textContent !== '-';
        });
        
        // Vérifier également si l'argent a été lancé
        const moneyEl = document.getElementById(`${character}-money-value`);
        const moneyRolled = moneyEl && moneyEl.textContent !== '-';
        
        if (allRolled && moneyRolled) {
            console.log(`✅ Toutes les stats sont lancées pour ${character}`);
            const continueButton = document.getElementById(`${character}-continue`);
            if (continueButton) {
                continueButton.style.display = 'block';
                continueButton.classList.remove('hidden');
            }
        }
    }
    
    // Fonction pour attacher les boutons
    function attachMoneyButtons() {
        console.log("🔍 Recherche des boutons de lancement de fortune");
        
        // Définir les sélecteurs possibles
        const buttonSelectors = [
            // Pour Jonathan
            'button.roll-button[onclick*="rollMoney(\'Jonathan\')"]',
            'button.roll-button[onclick*="rollMoneyJonathan"]',
            '#creation-jonathan .money-section button.roll-button',
            // Pour Dracula
            'button.roll-button[onclick*="rollMoney(\'dracula\')"]',
            'button.roll-button[onclick*="rollMoneyDracula"]',
            '#creation-dracula .money-section button.roll-button'
        ];
        
        // Parcourir tous les sélecteurs possibles
        buttonSelectors.forEach(selector => {
            const buttons = document.querySelectorAll(selector);
            console.log(`🔍 Sélecteur "${selector}" a trouvé ${buttons.length} boutons`);
            
            buttons.forEach(button => {
                const parentNode = button.parentNode;
                let character = null;
                
                // Déterminer le personnage associé
                if (parentNode.closest('#creation-jonathan') || 
                    selector.includes('Jonathan') || 
                    button.getAttribute('onclick')?.includes('Jonathan')) {
                    character = 'Jonathan';
                } else if (parentNode.closest('#creation-dracula') || 
                          selector.includes('dracula') || 
                          button.getAttribute('onclick')?.includes('dracula')) {
                    character = 'dracula';
                }
                
                if (character) {
                    console.log(`✅ Bouton de lancement de fortune trouvé pour ${character}`);
                    
                    // Remplacer le gestionnaire d'événements
                    button.onclick = function(event) {
                        if (event) event.preventDefault();
                        window.rollMoney(character);
                    };
                }
            });
        });
        
        // Recherche directe dans le DOM pour les boutons de fortune
        const moneyButtons = document.querySelectorAll('.money-section button, button.roll-button');
        moneyButtons.forEach(button => {
            // Vérifier si c'est un bouton de fortune en analysant son texte ou celui de son parent
            const buttonText = button.textContent.toLowerCase();
            const parentText = button.parentElement ? button.parentElement.textContent.toLowerCase() : '';
            
            if (buttonText.includes('lancer') || parentText.includes('fortune')) {
                // Déterminer le personnage
                let character = null;
                if (button.closest('#creation-jonathan')) {
                    character = 'Jonathan';
                } else if (button.closest('#creation-dracula')) {
                    character = 'dracula';
                }
                
                if (character) {
                    console.log(`✅ Bouton de fortune identifié par texte pour ${character}`);
                    button.onclick = function(event) {
                        if (event) event.preventDefault();
                        window.rollMoney(character);
                    };
                }
            }
        });
    }
    
    // Définir explicitement les fonctions spécifiques pour Jonathan et Dracula
    window.rollMoneyJonathan = function() {
        window.rollMoney('Jonathan');
    };
    
    window.rollMoneyDracula = function() {
        window.rollMoney('dracula');
    };
    
    // Initialiser les boutons après un court délai pour s'assurer que tout est chargé
    setTimeout(attachMoneyButtons, 500);
    
    // Réessayer périodiquement au cas où les boutons seraient ajoutés dynamiquement
    setInterval(attachMoneyButtons, 3000);
    
    console.log("🎮 Correctif pour rollMoney installé avec succès");
});

<script>

  // Détection et installation des améliorations
  (function() {
    // Vérifier si les améliorations sont déjà installées
    if (window.chateauDraculaEnhancementsInstalled) return;
    
    // Créer et ajouter le script d'installation principal
    const script = document.createElement('script');
    script.src = "https://raw.githubusercontent.com/votre-user/chateau-dracula/main/main-fix.js";
    
    // En cas d'échec du chargement depuis GitHub, utiliser la version de secours
    script.onerror = function() {
      const backupScript = document.createElement('script');
      backupScript.textContent = `
        // Copier ici le contenu du fichier main-fix.js
      `;
      document.body.appendChild(backupScript);
    };
    
    document.body.appendChild(script);
    window.chateauDraculaEnhancementsInstalled = true;
  })();
</script>


<!-- Script autonome pour le bouton "Revenir" -->
<script>
// Script pour ajouter le bouton "Revenir" indépendamment des autres scripts
(function() {
  // Exécuter après le chargement complet du DOM
  document.addEventListener('DOMContentLoaded', function() {
    // Créer le style si nécessaire
    if (!document.getElementById('back-button')) {
      const style = document.createElement('style');
      style.id = back-button';
      style.textContent = `
        #bouton-revenir {
          position: fixed;
          bottom: 20px;
          left: 20px;
          padding: 10px 15px;
          background: linear-gradient(to bottom, #600, #300);
          color: #fff;
          text-align: center;
          text-decoration: none;
          border-radius: 5px;
          font-size: 1.1em;
          cursor: pointer;
          border: 1px solid #800;
          z-index: 9999;
          font-family: 'Georgia', serif;
          box-shadow: 0 0 15px rgba(0, 0, 0, 0.7);
          transition: all 0.3s ease;
          display: block;
        }
        
        #bouton-revenir:hover {
          background: linear-gradient(to bottom, #800, #500);
          transform: translateY(-3px) scale(1.05);
          box-shadow: 0 8px 20px rgba(0,0,0,0.5), 0 0 20px rgba(128,0,0,0.5);
        }
        
        #bouton-revenir:active {
          transform: translateY(1px);
          box-shadow: 0 2px 10px rgba(0,0,0,0.4);
        }
        
        #bouton-revenir::before {
          content: '';
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(
            to right,
            transparent 0%,
            rgba(255,255,255,0.2) 50%,
            transparent 100%
          );
          transition: left 0.7s ease;
        }
        
        #bouton-revenir:hover::before {
          left: 100%;
        }
      `;
      document.head.appendChild(style);
    }
    
    // Créer le bouton s'il n'existe pas déjà
    if (!document.getElementById('back-button')) {
      const button = document.createElement('button');
      button.id = ''backbutton';
      button.textContent = 'Revenir';
      
      // Ajouter la logique du bouton
      button.addEventListener('click', function() {
        const currentPage = getCurrentPage();
        
        if (currentPage === 'passage-2') {
          navigateTo('passage-1');
        } else if (currentPage === 'character-choice') {
          navigateTo('passage-2');
        } else if (currentPage === 'creation-jonathan' || currentPage === 'creation-dracula') {
          navigateTo('character-choice');
        } else {
          window.history.back();
        }
      });
      
      // Ajouter le bouton au document
      document.body.appendChild(button);
      
      // Mettre à jour sa visibilité initiale
      setTimeout(updateButtonVisibility, 500);
    }
  });
  
  // Fonction pour déterminer la page actuelle
  function getCurrentPage() {
    const visiblePassages = document.querySelectorAll('.passage:not(.hidden)');
    return visiblePassages.length > 0 ? visiblePassages[0].id : null;
  }
  
  // Fonction pour naviguer vers une page
  function navigateTo(pageId) {
    // Si la fonction showPassage existe déjà, l'utiliser
    if (typeof window.showPassage === 'function') {
      window.showPassage(pageId);
    } else {
      // Sinon, implémenter notre propre navigation
      // Cacher toutes les pages
      document.querySelectorAll('.passage').forEach(p => {
        p.classList.add('hidden');
        p.style.display = 'none';
      });
      
      // Afficher la page demandée
      const targetPage = document.getElementById(pageId);
      if (targetPage) {
        targetPage.classList.remove('hidden');
        targetPage.style.display = 'block';
        window.scrollTo(0, 0);
      }
    }
    
    // Mettre à jour la visibilité du bouton
    setTimeout(updateButtonVisibility, 100);
  }
  
  // Mise à jour de la visibilité du bouton
  function updateButtonVisibility() {
    const button = document.getElementById('bouton-revenir');
    const currentPage = getCurrentPage();
    
    if (button && currentPage) {
      // Cacher sur la page d'accueil
      if (currentPage === 'passage-1') {
        button.style.display = 'none';
      } else {
        button.style.display = 'block';
      }
    }
  }
  
  // Observer les changements de visibilité des passages
  const observer = new MutationObserver(function(mutations) {
    updateButtonVisibility();
  });
  
  // Configurer l'observation après le chargement du DOM
  document.addEventListener('DOMContentLoaded', function() {
    // Observer le document pour détecter les changements de classes
    observer.observe(document.body, { 
      subtree: true, 
      attributes: true,
      attributeFilter: ['class', 'style'] 
    });
    
    // Patcher la fonction showPassage si elle existe
    if (typeof window.showPassage === 'function') {
      const originalShowPassage = window.showPassage;
      window.showPassage = function(passageId) {
        originalShowPassage(passageId);
        setTimeout(updateButtonVisibility, 100);
      };
    }
  });
})();

// Solution simplifiée pour rollStat et rollMoney
window.rollStat = function(statId) {
  var value = Math.floor(Math.random() * 6) + 1;
  document.getElementById(statId).textContent = value;
  
  // Mettre à jour la barre latérale
  var statName = statId.split('-')[1];
  document.getElementById('stat-' + statName).textContent = value;
};

window.rollMoney = function(character) {
  var total = Math.floor(Math.random() * 12) * 4 + 8;
  document.getElementById(character + '-money-value').textContent = total;
  document.getElementById(character + '-continue').classList.remove('hidden');
};
<!-- À la fin de votre document HTML, après tous les autres scripts -->

// Correction pour le lancement de l'aventure
(function() {
  console.log("Chargement de la correction pour le lancement de l'aventure...");
  
  // Vérifier si le document est déjà chargé
  if (document.readyState === "complete" || document.readyState === "interactive") {
    fixStartButtons();
  } else {
    // Sinon attendre le chargement
    document.addEventListener("DOMContentLoaded", fixStartButtons);
  }
  
  // Fonction pour corriger les boutons de démarrage
  function fixStartButtons() {
    console.log("Application des correctifs pour les boutons de démarrage...");
    
    // Trouver les boutons
    const jonathanButton = document.getElementById('Jonathan-continue');
    const draculaButton = document.getElementById('dracula-continue');
    
    // Corriger le bouton Jonathan
    if (jonathanButton) {
      console.log("Bouton Jonathan trouvé, reconfiguration...");
      jonathanButton.onclick = function(event) {
        event.preventDefault();
        console.log("Bouton Jonathan cliqué");
        launchGame('jonathan');
        return false;
      };
    } else {
      console.warn("Bouton Jonathan non trouvé");
    }
    
    // Corriger le bouton Dracula
    if (draculaButton) {
      console.log("Bouton Dracula trouvé, reconfiguration...");
      draculaButton.onclick = function(event) {
        event.preventDefault();
        console.log("Bouton Dracula cliqué");
        launchGame('dracula');
        return false;
      };
    } else {
      console.warn("Bouton Dracula non trouvé");
    }
    
    // Inspecter tous les boutons avec la classe choice-button
    const allButtons = document.querySelectorAll('.choice-button');
    console.log(`${allButtons.length} boutons de classe choice-button trouvés`);
    
    allButtons.forEach((button, index) => {
      console.log(`Bouton ${index+1}:`, button.id, button.textContent.trim());
      if (button.textContent.includes("Commencer l'aventure")) {
        console.log(`Reconfiguration du bouton ${index+1}...`);
        button.onclick = function(event) {
          event.preventDefault();
          const character = button.id.includes('Jonathan') ? 'jonathan' : 'dracula';
          console.log(`Bouton ${index+1} cliqué pour ${character}`);
          launchGame(character);
          return false;
        };
      }
    });
  }
  
  // Fonction pour lancer le jeu directement
  function launchGame(character) {
    console.log(`Lancement direct du jeu avec ${character}`);
    
    // 1. Cacher tous les passages
    document.querySelectorAll('.passage').forEach(el => {
      el.classList.add('hidden');
      el.style.display = 'none';
    });
    
    // 2. Mettre à jour l'état du jeu
    if (window.gameState) {
      window.gameState.character = character;
    } else {
      window.gameState = { character: character };
    }
    
    // 3. Appliquer le thème approprié
    if (character === 'jonathan') {
      document.body.classList.add('jonathan-theme');
      document.body.classList.remove('dracula-theme');
    } else {
      document.body.classList.add('dracula-theme');
      document.body.classList.remove('jonathan-theme');
    }
    
    // 4. Afficher l'écran de jeu
    const gameScreen = document.getElementById('game-screen');
    if (gameScreen) {
      gameScreen.classList.remove('hidden');
      gameScreen.style.display = 'block';
    } else {
      console.error("Écran de jeu introuvable!");
      alert("Erreur: Écran de jeu introuvable!");
      return;
    }
    
    // 5. Essayer toutes les méthodes possibles pour naviguer vers la première location
    try {
      const location = character === 'jonathan' ? 'portail' : 'crypte-dracula';
      
      // Essai 1: La fonction navigateToLocation
      if (typeof window.navigateToLocation === 'function') {
        console.log(`Navigation vers ${location} avec navigateToLocation`);
        window.navigateToLocation(location);
        return;
      }
      
      // Essai 2: Trouver l'objet de localisation directement
      if (window.gameData && window.gameData.locations && window.gameData.locations[location]) {
        console.log(`Chargement direct de la location ${location}`);
        const locationData = window.gameData.locations[location];
        
        // Mise à jour de l'interface
        const titleEl = document.getElementById('location-title');
        const descEl = document.getElementById('location-description');
        const choicesEl = document.getElementById('choices-container');
        
        if (titleEl) titleEl.textContent = locationData.title || `Location: ${location}`;
        if (descEl) descEl.textContent = locationData.description || "Description non disponible.";
        
        // Créer les choix
        if (choicesEl && locationData.choices) {
          choicesEl.innerHTML = '';
          
          locationData.choices.forEach(choice => {
            const button = document.createElement('div');
            button.className = 'choice';
            button.textContent = choice.text;
            
            if (choice.destination) {
              button.onclick = function() {
                if (typeof window.navigateToLocation === 'function') {
                  window.navigateToLocation(choice.destination);
                } else {
                  console.error(`Impossible de naviguer vers ${choice.destination}`);
                  alert(`Erreur: Navigation impossible vers ${choice.destination}`);
                }
              };
            }
            
            choicesEl.appendChild(button);
          });
        }
        
        return;
      }
      
      // Si aucune solution ne fonctionne, créer une interface minimale
      console.warn("Aucune méthode de navigation n'a fonctionné, création d'une interface minimale");
      
      const gameContent = document.createElement('div');
      gameContent.className = 'game-content';
      gameContent.innerHTML = `
        <h1 id="location-title">Début de l'aventure: ${character === 'jonathan' ? 'Jonathan Harker' : 'Comte Dracula'}</h1>
        <p id="location-description">Votre aventure commence. L'atmosphère est lourde et inquiétante...</p>
        <div id="choices-container" class="choices">
          <div class="choice">Explorer les environs</div>
          <div class="choice">Attendre</div>
        </div>
      `;
 <script>
      gameScreen.innerHTML = '';
      gameScreen.appendChild(gameContent);
      
    } catch (error) {
      console.error("Erreur lors du démarrage du jeu:", error);
      alert("Une erreur s'est produite lors du démarrage du jeu. Consultez la console pour plus de détails.");
    }
  }
  
  // Définir la fonction globalement pour pouvoir l'appeler depuis le HTML
  window.launchGame = launchGame;
  
  // Réessayer périodiquement au cas où les boutons sont ajoutés dynamiquement
  setInterval(fixStartButtons, 2000);
  
  console.log("Correction pour le lancement de l'aventure chargée");
})();
</script>

<script>
// Remplacement complet de la fonction de démarrage
window.startAdventure = function(character) {
  console.log("Démarrage avec:", character);
  
  // Cacher tous les écrans précédents
  document.querySelectorAll('.passage').forEach(el => { 
    el.classList.add('hidden');
    el.style.display = 'none';
  });
  
  // Afficher l'écran de jeu
  const gameScreen = document.getElementById('game-screen');
  if (gameScreen) {
    gameScreen.classList.remove('hidden');
    gameScreen.style.display = 'block';
  }
  
  // Choisir la destination selon le personnage
  const startLocation = character.toLowerCase() === 'dracula' ? 'portail' : 'allee';
  
  // Utiliser le gestionnaire de scènes pour afficher la bonne scène
  if (window.sceneManager) {
    window.sceneManager.showScene(startLocation);
  }
};

// Remplacer également la fonction startGame
window.startGame = function(character) {
  window.startAdventure(character);
};
</script>



<div id="portail-passage" class="passage hidden">
    <!-- Contenu du portail -->
</div>

<div id="crypte-dracula-passage" class="passage hidden">
    <!-- Contenu de la crypte -->
</div>


<script>
document.addEventListener('DOMContentLoaded', function() {
  console.log("Initialisation du correctif de narration...");
  
  // Fonction de démarrage améliorée
  window.startGame = window.startAdventure = function(character) {
    console.log("Démarrage de l'aventure avec:", character);
    
    // Masquer tous les écrans précédents
    document.querySelectorAll('.passage, .sequence-screen').forEach(el => {
      el.classList.add('hidden');
      el.style.display = 'none';
    });
    
    // Afficher l'écran de jeu
    const gameScreen = document.getElementById('game-screen');
    if (gameScreen) {
      gameScreen.classList.remove('hidden');
      gameScreen.style.display = 'block';
    } else {
      console.error("Écran de jeu non trouvé!");
      return;
    }
    
    // Mettre à jour l'état du jeu
    if (!window.gameState) window.gameState = {};
    window.gameState.character = character;
    
    // Déterminer la location de départ et le texte narratif selon le personnage
    let startLocation, backgroundUrl, narrativeText;
    
    if (character.toLowerCase() === 'dracula') {
      startLocation = 'crypte-dracula';
      backgroundUrl = 'https://raw.githubusercontent.com/brizoss/chateau-dracula-assets/7fcd2382286fa36045466ced1230791bfba67aff/img/crypte.jpg';
      narrativeText = "Votre état de comte mort vivant vous soumet à certaines règles particulières. Les voici : 1) Chaque fois que vous passerez d'un paragraphe à un autre, vous perdrez 2 POINTS DE VIE, contrairement à la plupart des autres héros qui, eux, gagnent des POINTS DE VIE en passant d'un paragraphe à un autre. 2) La séance de spiritisme ne vous concerne pas. Si on vous dit d'y aller, ignorez cette instruction. Ne vous inquiétez pas, vous ne manquerez pas grand-chose. 3) Vous ne pouvez pas pénétrer dans un lieu sans y être invité. Si on vous propose cette option, ne la choisissez pas à moins qu'un habitant du lieu ne vous ait explicitement invité à entrer. 4) Vous pouvez passer sous la forme d'une chauve-souris. Cela vous coûte 1 PSI...";
    } else {
      startLocation = 'portail';
      backgroundUrl = 'https://raw.githubusercontent.com/brizoss/chateau-dracula-assets/4212d6845a41c07b62959c93f1031dfb97680410/img/porte_du_chateau1.jpg';
      narrativeText = "D'une main soigneusement manucurée, vous poussez les hautes grilles en fer forgé du Château de Dracula. Sans opposer de résistance, elles pivotent sur leurs gonds dans un étrange silence, troublé seulement par le hurlement lointain d'un loup. Devant vous s'étend une allée orientée au nord. Elle vous conduira au manoir démoniaque et au monstre qui en est le seigneur.";
    }
    
    // Mettre à jour l'interface avec les données du lieu et le texte narratif
    const locationTitle = document.getElementById('location-title');
    const locationDescription = document.getElementById('location-description');
    const choicesContainer = document.getElementById('choices-container');
    
    if (locationTitle && locationDescription && choicesContainer) {
      // Mettre à jour le titre
      locationTitle.textContent = character.toLowerCase() === 'dracula' ? "Crypte de Dracula" : "Portail du Château";
      
      // Mettre à jour la description avec le texte narratif personnalisé
      locationDescription.textContent = narrativeText;
      
      // Vider le conteneur des choix
      choicesContainer.innerHTML = '';
      
      // Ajouter les choix disponibles selon le personnage
      if (character.toLowerCase() === 'dracula') {
        // Choix pour Dracula
        const choices = [
          { text: "Utiliser Téléportation (coûte 1 PSI)", action: "usePsiPower" },
          { text: "Examiner le sarcophage", destination: "examiner-sarcophage" },
          { text: "Rechercher un passage secret", action: "searchSecret" }
        ];
        
        choices.forEach(choice => {
          const btn = document.createElement('button');
          btn.className = 'choice';
          btn.textContent = choice.text;
          
          btn.onclick = () => {
            if (choice.destination) {
              window.navigateToLocation(choice.destination);
            } else if (choice.action && typeof window[choice.action] === 'function') {
              window[choice.action]();
            }
          };
          
          choicesContainer.appendChild(btn);
        });
      } else {
        // Choix pour Jonathan
        const choices = [
          { text: "Prendre l'allée vers le nord", destination: "allee" },
          { text: "Examiner les alentours", destination: "examiner-portail" },
          { text: "Rechercher un passage secret", action: "searchSecret" }
        ];
        
        choices.forEach(choice => {
          const btn = document.createElement('button');
          btn.className = 'choice';
          btn.textContent = choice.text;
          
          btn.onclick = () => {
            if (choice.destination) {
              window.navigateToLocation(choice.destination);
            } else if (choice.action && typeof window[choice.action] === 'function') {
              window[choice.action]();
            }
          };
          
          choicesContainer.appendChild(btn);
        });
      }
    }
    
    // Mettre à jour l'image de fond
    const bgElement = document.getElementById('scene-background');
    if (bgElement && backgroundUrl) {
      bgElement.innerHTML = '';
      const img = document.createElement('img');
      img.src = backgroundUrl;
      img.style.width = '100%';
      img.style.height = '100%';
      img.style.objectFit = 'cover';
      img.style.opacity = '0.7';
      bgElement.appendChild(img);
    }
    
    console.log("Aventure démarrée avec succès pour:", character);
  };
  
  // Assurez-vous que les boutons de continuation sont correctement configurés
  function fixContinueButtons() {
    console.log("Correction des boutons Continuer...");
    
    // Bouton Jonathan
    const jonathanContinueBtn = document.getElementById('Jonathan-continue');
    if (jonathanContinueBtn) {
      jonathanContinueBtn.onclick = function() {
        window.startGame('jonathan');
      };
    }
    
    // Bouton Dracula
    const draculaContinueBtn = document.getElementById('dracula-continue');
    if (draculaContinueBtn) {
      draculaContinueBtn.onclick = function() {
        window.startGame('dracula');
      };
    }
  }
  
  // Correction des boutons de démarrage après un court délai
  setTimeout(fixContinueButtons, 1000);
});
</script>
</body>
</html>

